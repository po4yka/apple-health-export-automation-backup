# =============================================================================
# Apple Health Backup & Analysis System - Environment Configuration
# =============================================================================
# Copy this file to .env and configure the values below.
# Generate secure passwords: openssl rand -base64 16
# Generate secure tokens: openssl rand -hex 32
# =============================================================================

# -----------------------------------------------------------------------------
# MQTT Configuration
# -----------------------------------------------------------------------------
# Connection settings for the MQTT broker (Mosquitto).
# The health-ingest service subscribes to receive health data from the
# Health Auto Export iOS app.

# MQTT broker hostname or IP address
MQTT_HOST=192.168.1.175

# MQTT broker port (default: 1883, TLS: 8883)
MQTT_PORT=1883

# MQTT authentication (leave empty if broker doesn't require auth)
MQTT_USERNAME=
MQTT_PASSWORD=

# MQTT topic pattern to subscribe to
# Use # for multi-level wildcard, + for single-level
MQTT_TOPIC=health/export/#

# -----------------------------------------------------------------------------
# InfluxDB Configuration
# -----------------------------------------------------------------------------
# InfluxDB 2.x time-series database settings.
# On first run, InfluxDB will be initialized with these credentials.

# API token for authentication (REQUIRED - generate with: openssl rand -hex 32)
INFLUXDB_TOKEN=your-influxdb-token-here

# Organization name
INFLUXDB_ORG=health

# Bucket name for storing health metrics
INFLUXDB_BUCKET=apple_health

# Admin credentials for InfluxDB UI (http://localhost:8087)
INFLUXDB_ADMIN_USER=admin
INFLUXDB_ADMIN_PASSWORD=your-secure-password-here

# Data retention policy (0 = infinite retention)
# Examples: 0, 30d, 52w, 365d
INFLUXDB_RETENTION=0

# -----------------------------------------------------------------------------
# Grafana Configuration
# -----------------------------------------------------------------------------
# Grafana dashboard settings.

# Admin credentials for Grafana UI (http://localhost:3001)
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=your-grafana-password-here

# Public URL for Grafana (used for links in emails, etc.)
# Change this if exposing via reverse proxy or Cloudflare Tunnel
GRAFANA_ROOT_URL=https://health.example.com

# -----------------------------------------------------------------------------
# Application Configuration
# -----------------------------------------------------------------------------
# Settings for the health-ingest service.

# Log level: DEBUG, INFO, WARNING, ERROR, CRITICAL
APP_LOG_LEVEL=INFO

# Log format: json (structured, for production) or console (human-readable)
APP_LOG_FORMAT=json

# Default source tag for metrics without explicit source
APP_DEFAULT_SOURCE=health_auto_export

# -----------------------------------------------------------------------------
# Anthropic API Configuration (Optional)
# -----------------------------------------------------------------------------
# Required only for AI-powered weekly health reports.
# Get your API key from: https://console.anthropic.com/

# Anthropic API key (starts with sk-ant-)
ANTHROPIC_API_KEY=

# Claude model to use for report generation
# Options: claude-sonnet-4-20250514, claude-opus-4-20250514
ANTHROPIC_MODEL=claude-sonnet-4-20250514
