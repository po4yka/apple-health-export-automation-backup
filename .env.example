# =============================================================================
# Apple Health Backup & Analysis System - Environment Configuration
# =============================================================================
# Copy this file to .env and configure the values below.
# Generate secure passwords: openssl rand -base64 16
# Generate secure tokens: openssl rand -hex 32
# =============================================================================

# -----------------------------------------------------------------------------
# HTTP Ingestion API Configuration
# -----------------------------------------------------------------------------
# REST API endpoint for receiving health data from Health Auto Export iOS app.
# Data is POSTed directly via HTTPS through the Cloudflare Tunnel.

# Enable HTTP ingestion endpoint
HTTP_ENABLED=true

# HTTP server port (inside the container; externally mapped to HTTP_PORT_EXTERNAL)
HTTP_PORT=8080

# External port mapping (host port -> container HTTP_PORT)
HTTP_PORT_EXTERNAL=8084

# Bearer token for authentication (REQUIRED - generate with: openssl rand -hex 32)
# Set this in the iOS app's Authorization header: Bearer <token>
HTTP_AUTH_TOKEN=

# Maximum request body size in bytes (default: 10MB)
HTTP_MAX_REQUEST_SIZE=10485760

# -----------------------------------------------------------------------------
# InfluxDB Configuration
# -----------------------------------------------------------------------------
# InfluxDB 2.x time-series database settings.
# On first run, InfluxDB will be initialized with these credentials.

# API token for authentication (REQUIRED - generate with: openssl rand -hex 32)
INFLUXDB_TOKEN=your-influxdb-token-here

# Organization name
INFLUXDB_ORG=health

# Bucket name for storing health metrics
INFLUXDB_BUCKET=apple_health

# Admin credentials for InfluxDB UI (http://localhost:8087)
INFLUXDB_ADMIN_USER=admin
INFLUXDB_ADMIN_PASSWORD=your-secure-password-here

# Data retention policy (0 = infinite retention)
# Examples: 0, 30d, 52w, 365d
INFLUXDB_RETENTION=0

# -----------------------------------------------------------------------------
# Grafana Configuration
# -----------------------------------------------------------------------------
# Grafana dashboard settings.

# Admin credentials for Grafana UI (http://localhost:3050)
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=your-grafana-password-here

# Public URL for Grafana (used for links in emails, etc.)
# Change this if exposing via reverse proxy or Cloudflare Tunnel
GRAFANA_ROOT_URL=https://health.example.com

# -----------------------------------------------------------------------------
# Application Configuration
# -----------------------------------------------------------------------------
# Settings for the health-ingest service.

# Log level: DEBUG, INFO, WARNING, ERROR, CRITICAL
APP_LOG_LEVEL=INFO

# Log format: json (structured, for production) or console (human-readable)
APP_LOG_FORMAT=json

# Default source tag for metrics without explicit source
APP_DEFAULT_SOURCE=health_auto_export

# Prometheus metrics server port
APP_PROMETHEUS_PORT=9090

# -----------------------------------------------------------------------------
# AI Provider Configuration (Optional)
# -----------------------------------------------------------------------------
# Required only for AI-powered weekly health reports.
# Select provider: anthropic, openai, grok
INSIGHT_AI_PROVIDER=anthropic

# -----------------------------------------------------------------------------
# Anthropic API Configuration (Optional)
# -----------------------------------------------------------------------------
# Get your API key from: https://console.anthropic.com/

# Anthropic API key (starts with sk-ant-)
ANTHROPIC_API_KEY=

# Claude model to use for report generation
# Options: claude-sonnet-4-20250514, claude-opus-4-20250514
ANTHROPIC_MODEL=claude-sonnet-4-20250514

# -----------------------------------------------------------------------------
# OpenAI API Configuration (Optional)
# -----------------------------------------------------------------------------
# Get your API key from: https://platform.openai.com/

# OpenAI API key (starts with sk-)
OPENAI_API_KEY=

# OpenAI model to use for report generation
OPENAI_MODEL=gpt-4o-mini

# -----------------------------------------------------------------------------
# Grok (xAI) API Configuration (Optional)
# -----------------------------------------------------------------------------
# Get your API key from: https://console.x.ai/

# Grok API key
GROK_API_KEY=

# Grok model to use for report generation
GROK_MODEL=grok-2-latest

# -----------------------------------------------------------------------------
# OpenClaw Gateway Configuration (Optional)
# -----------------------------------------------------------------------------
# OpenClaw AI assistant gateway for Telegram delivery and health data queries.
# See: https://openclaw.ai/

# Enable Telegram delivery via OpenClaw gateway
OPENCLAW_ENABLED=true

# OpenClaw hooks API authentication token
OPENCLAW_HOOKS_TOKEN=

# Target Telegram user ID for weekly report delivery
OPENCLAW_TELEGRAM_USER_ID=0

# Telegram bot token (for OpenClaw's Telegram channel)
TELEGRAM_BOT_TOKEN=

# External port for OpenClaw gateway
OPENCLAW_PORT_EXTERNAL=18789

# -----------------------------------------------------------------------------
# MCP Tooling Configuration (Optional)
# -----------------------------------------------------------------------------
# Used only if you add an external GitHub MCP server in your local .mcp.json.
# Use a fine-grained token with least privilege and selected repositories.
GITHUB_PERSONAL_ACCESS_TOKEN=
